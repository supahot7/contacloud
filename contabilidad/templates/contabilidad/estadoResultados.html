{% extends 'base.html' %} {% load static %} {% block title %}Estado de
Resultados - Estados Financieros{% endblock %} {% block content %}
<link
  rel="stylesheet"
  href="{% static 'css/contabilidad/estadoResultados.css' %}"
/>

<div class="container py-4">
  <!-- Header -->
  <div class="mb-4 text-center">
    <h1 class="display-5">Estado de Resultados</h1>
    <p class="lead">Gesti√≥n del Estado de Resultados Contable</p>
  </div>

  <!-- Controles / Filtros -->
  <div class="row mb-3 g-2 align-items-center filtros-grid">
    <div class="col-md-3">
      <label class="form-label">Fecha Inicial</label>
      <input type="date" class="form-control" value="{{ fecha_inicio }}" />
    </div>
    <div class="col-md-3">
      <label class="form-label">Fecha Final</label>
      <input type="date" class="form-control" value="{{ fecha_fin }}" />
    </div>
    <div class="col-md-2">
      <label class="form-label d-block">&nbsp;</label>
      <button class="btn btn-primary w-100">Generar Reporte</button>
    </div>
    <div class="col-md-4 text-end">
      <label class="form-label d-block">&nbsp;</label>
      <button class="btn btn-sm btn-warning me-1">üì§ Exportar</button>
      <button class="btn btn-sm btn-danger">üñ®Ô∏è Imprimir</button>
    </div>
  </div>

  <!-- Tabla de Estado de Resultados -->
  <div class="estado-table-container">
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle estado-table">
        <thead>
          <tr>
            <th>Cuenta</th>
            <th class="text-end col-monto">Monto</th>
          </tr>
        </thead>
        <tbody>
          <!-- INGRESOS -->
          <tr class="group-header table-primary">
            <td colspan="2">INGRESOS</td>
          </tr>
          {% for ingreso in ingresos %}
          <tr class="account-row">
            <td class="cuenta-item">{{ ingreso.nombre }}</td>
            <td class="text-end">${{ ingreso.monto|floatformat:2 }}</td>
          </tr>
          {% endfor %}
          <tr class="subtotal-row table-primary">
            <td>TOTAL INGRESOS</td>
            <td class="text-end total-value">
              ${{ total_ingresos|floatformat:2 }}
            </td>
          </tr>

          <!-- COSTOS -->
          <tr class="group-header table-warning">
            <td colspan="2">COSTOS</td>
          </tr>
          {% for costo in costos %}
          <tr class="account-row">
            <td class="cuenta-item">{{ costo.nombre }}</td>
            <td class="text-end">${{ costo.monto|floatformat:2 }}</td>
          </tr>
          {% endfor %}
          <tr class="subtotal-row table-warning">
            <td>TOTAL COSTOS</td>
            <td class="text-end total-value">
              ${{ total_costos|floatformat:2 }}
            </td>
          </tr>

          <!-- UTILIDAD BRUTA -->
          <tr class="total-row table-success">
            <td>UTILIDAD BRUTA</td>
            <td class="text-end total-value">
              ${{ utilidad_bruta|floatformat:2 }}
            </td>
          </tr>

          <!-- GASTOS OPERATIVOS -->
          <tr class="group-header table-danger">
            <td colspan="2">GASTOS OPERATIVOS</td>
          </tr>
          {% for gasto in gastos %}
          <tr class="account-row">
            <td class="cuenta-item">{{ gasto.nombre }}</td>
            <td class="text-end">${{ gasto.monto|floatformat:2 }}</td>
          </tr>
          {% endfor %}
          <tr class="subtotal-row table-danger">
            <td>TOTAL GASTOS</td>
            <td class="text-end total-value">
              ${{ total_gastos|floatformat:2 }}
            </td>
          </tr>

          <!-- UTILIDAD O P√âRDIDA NETA -->
          <tr class="total-row {{ clase_utilidad }}">
            <td>{{ nombre_utilidad }}</td>
            <td class="text-end total-value">
              ${{ utilidad_neta|floatformat:2 }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Verificaci√≥n de estado -->
  <div class="mt-3 text-center">
    <span class="badge-success">‚úì Estado Generado Correctamente</span>
  </div>
</div>
{% endblock %}
